<?xml version="1.0" encoding="UTF-8" ?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">


	<changeSet id="1" author="dmitry_an">
		<sql>
			CREATE DATABASE IF NOT EXISTS `cv_storage`
			CHARACTER SET utf8
			COLLATE utf8_general_ci;
		</sql>
	</changeSet>

	<changeSet id="2" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS `cv_storage`.`candidate` (
			`ID`
			varchar(255) NOT NULL,
			`BIRTH_DATE` date DEFAULT NULL,
			`FIRST_NAME`
			varchar(255) DEFAULT NULL,
			`GENDER` varchar(255) DEFAULT NULL,
			`LAST_NAME` varchar(255) DEFAULT NULL,
			`MIDDLE_NAME` varchar(255)
			DEFAULT NULL,
			PRIMARY KEY (`id`)
			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>

	<changeSet id="3" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS `cv_storage`. `email` (
			`EMAIL_ID`
			varchar(255) NOT NULL,
			`EMAIL_ADRESS` varchar(255) DEFAULT NULL,
			`CANDIDATE_ID` varchar(255) DEFAULT NULL,
			PRIMARY KEY (`EMAIL_ID`),

			CONSTRAINT `FK_EMAIL_CANDIDATE` FOREIGN KEY (`CANDIDATE_ID`)
			REFERENCES
			`candidate` (`ID`)
			ON DELETE NO ACTION
			ON UPDATE CASCADE

			)
			ENGINE=InnoDB DEFAULT CHARSET=utf8;

		</sql>
	</changeSet>

	<changeSet id="4" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS `cv_storage`.`phone` (
			`PHONE_ID`
			varchar(255) NOT NULL,
			`PHONE_NUMBER` varchar(255) DEFAULT NULL,
			`CANDIDATE_ID` varchar(255) DEFAULT NULL,
			PRIMARY KEY (`PHONE_ID`),

			CONSTRAINT `FK_PHONE_CANDIDATE` FOREIGN KEY (`CANDIDATE_ID`)
			REFERENCES
			`candidate` (`ID`)
			ON DELETE NO ACTION
			ON UPDATE CASCADE

			)
			ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>

	<changeSet id="5" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS `cv_storage`.`site` (
			`SITE_ID` varchar(255) NOT NULL,
			`SITE_URL` varchar(255) DEFAULT NULL,
			`CANDIDATE_ID` varchar(255) DEFAULT NULL,
			PRIMARY KEY (`SITE_ID`),

			CONSTRAINT `FK_SITE_CANDIDATE` FOREIGN KEY (`CANDIDATE_ID`) REFERENCES
			`candidate` (`ID`)
			ON DELETE NO ACTION
			ON UPDATE CASCADE

			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>

	<changeSet id="6" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS `cv_storage`.`skype` (
			`SKYPE_ID` varchar(255) NOT NULL,
			`SKYPE_USER_NAME` varchar(255) DEFAULT NULL,
			`CANDIDATE_ID` varchar(255) DEFAULT NULL,
			PRIMARY KEY (`SKYPE_ID`),

			CONSTRAINT `FK_SKYPE_CANDIDATE` FOREIGN KEY (`CANDIDATE_ID`) REFERENCES
			`candidate` (`ID`)
			ON DELETE NO ACTION
			ON UPDATE CASCADE

			) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>

	<changeSet id="7" author="dmitry_an">
		<sql>
CREATE TABLE IF NOT EXISTS  `cv_storage`.`knowledge` (
  `KNOWLEDGE_ID` varchar(255) NOT NULL,
  `CANDIDATE_ID` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`KNOWLEDGE_ID`),
  
  CONSTRAINT `FK_KNOWLEDGE_CANDIDATE` FOREIGN KEY (`CANDIDATE_ID`) REFERENCES `candidate` (`ID`)
  ON DELETE NO ACTION
  ON UPDATE CASCADE
  
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>
	
		<changeSet id="8" author="dmitry_an">
		<sql>
			CREATE TABLE IF NOT EXISTS  `cv_storage`.`known_technologies` (
  `Knowledge_KNOWLEDGE_ID` varchar(255) NOT NULL,
  `KNOWN_TECHNOLOGIES` varchar(255) DEFAULT NULL,
  
  CONSTRAINT `FK_TECHNOLOG_KNOWLEDGE` FOREIGN KEY (`Knowledge_KNOWLEDGE_ID`) REFERENCES `knowledge` (`KNOWLEDGE_ID`)
  ON DELETE NO ACTION
  ON UPDATE CASCADE
  
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
		</sql>
	</changeSet>
	
		<changeSet id="9" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>
	
		<changeSet id="10" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>
	
		<changeSet id="11" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>
	
		<changeSet id="12" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>
	
		<changeSet id="13" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>
	
		<changeSet id="14" author="dmitry_an">
		<sql>
			ALTER TABLE `listexpenses`.`expenses`
			ADD CONSTRAINT `FK_RECEIVER`
			FOREIGN KEY (`receiver`)
			REFERENCES `listexpenses`.`receivers`
			(`num`);
		</sql>
	</changeSet>


</databaseChangeLog>